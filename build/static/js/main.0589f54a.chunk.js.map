{"version":3,"sources":["logo.svg","styled.tsx","Camera/components/MainFrame.tsx","Camera/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Button","styled","button","Span","span","Flex","input","div","props","column","wrap","MainFrameWrapper","UserFrame","size","Math","ceil","UserVideo","video","invertX","invertY","Action","style","icons","color","margin","border","borderRadius","padding","height","width","MainFrame","children","videoSize","camRef","audio","setAudio","setVideo","id","ref","onClick","background","cameraVideoSize","ideal","LiveFeed","React","useState","videoDevices","setVideoDevices","setAudioDevices","deviceId","setDeviceId","setVideoSize","setInvertX","setInvertY","img","setImg","useRef","mainCamRef","manipulatevideoVideo","a","v","callback","nav","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","mediaDevices","then","stream","getCamStream","document","getElementById","current","srcObject","play","canvas","createElement","getBoundingClientRect","console","log","getContext","drawImage","data","toDataURL","enumerateDevices","devices","fetchedVideoDevices","fetchedAudioDevices","forEach","device","d","kind","push","error","useEffect","getDevices","h","window","innerHeight","w","innerWidth","floor","className","onChange","e","target","value","map","label","split","justifyContentCenter","src","App","logo","alt","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.0589f54a.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import styled from 'styled-components'\n\nexport const Button: any = styled.button`\n`\nexport const Span: any = styled.span`\n`\nexport const Input: any = styled.input`\n`\nexport const Flex: any = styled.div`\n    display: flex;\n    flex-direction: ${(props: any) => props.column ? 'column' : 'row'};\n    flex-wrap: ${(props: any) => props.wrap ? 'wrap' : 'no-wrap'};\n`\n\nexport const MainFrameWrapper = styled.div`\n  position: relative;\n`\n\nexport const UserFrame: any = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: rgba(100, 100, 100);\n  background: rgba(190, 190, 190);\n  position: relative;\n  border-radius: 5px;\n  height: 90vh;\n  width: calc(100vw - 50px);\n  // @media (max-width: 540px) {\n  //   height: ${(props: any) => (props.size === 'big' ? Math.ceil(500 / 1.33) : 0)}px;\n  //   width: ${(props: any) => (props.size === 'big' ? 500 : 0)}px;\n  // }\n  // @media (max-width: 992px) {\n  //   height: ${(props: any) => (props.size === 'big' ? Math.ceil(900 / 1.33) : Math.ceil(200 / 1.33))}px;\n  //   width: ${(props: any) => (props.size === 'big' ? 900 : 200)}px;\n  // }\n  // @media (min-width: 993px) {\n  //   height: ${(props: any) => (props.size === 'big' ? Math.ceil(600 / 1.33) : Math.ceil(250 / 1.33))}px;\n  //   width: ${(props: any) => (props.size === 'big' ? 600 : 250)}px;\n  // }\n`\n\nexport const UserVideo: any = styled.video`\n  transform: scaleX(${(props: any) => props.invertX ? '-1' : '1'}) scaleY(${(props: any) => props.invertY ? '-1' : '1'});\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  margin: 0 auto;\n  // @media (max-width: 540px) {\n  //   height: ${(props: any) => (props.size === 'big' ? Math.ceil(500 / 1.33) : 0)}px;\n  //   width: ${(props: any) => (props.size === 'big' ? 500 : 0)}px;\n  // }\n  // @media (max-width: 992px) {\n  //   height: ${(props: any) => (props.size === 'big' ? Math.ceil(900 / 1.33) : Math.ceil(200 / 1.33))}px;\n  //   width: ${(props: any) => (props.size === 'big' ? 900 : 200)}px;\n  // }\n  // @media (min-width: 993px) {\n  //   height: ${(props: any) => (props.size === 'big' ? Math.ceil(600 / 1.33) : Math.ceil(250 / 1.33))}px;\n  //   width: ${(props: any) => (props.size === 'big' ? 600 : 250)}px;\n  // }\n`\n\nexport const Action = styled.div`\n  display: flex;\n  align-items: center;\n  margin: 0 auto;\n  position: absolute;\n  bottom: 50px;\n  left: 50%;\n  transform: translateX(-50%);\n`\n","import React from 'react'\nimport { UserFrame, UserVideo, MainFrameWrapper, Action } from '../../styled'\nimport { FaMicrophone, FaMicrophoneSlash, FaPhone, FaVideo } from 'react-icons/fa'\n\nconst style = {\n  icons: {\n    color: '#727272',\n    margin: 5,\n    border: '1px solid #727272',\n    borderRadius: '50%',\n    padding: 5,\n    height: 25,\n    width: 25\n  }\n}\n\nfunction MainFrame({ children, invertX, invertY, videoSize, camRef, audio, video, setAudio, setVideo }: any) {\n  return (\n    <MainFrameWrapper>\n      <UserFrame size=\"big\">\n        {video ? 'Loading feed...' : 'Enable Video.'}\n        <UserVideo\n          invertX={invertX}\n          invertY={invertY}\n          style={{ height: videoSize[1], width: videoSize[0] }}\n          size=\"big\"\n          id=\"cam\"\n          ref={camRef}\n        />\n      </UserFrame>\n      <Action>\n        {video && audio ? (\n          <FaMicrophone style={style.icons} onClick={() => setAudio(false)} />\n        ) : video && !audio ? (\n          <FaMicrophoneSlash style={style.icons} onClick={() => setAudio(true)} />\n        ) : null}\n        {/* <FaPhone style={{ transform: 'rotate(90deg)', ...style.icons }} /> */}\n        <FaVideo\n          style={{ background: video ? 'red' : 'transparent', ...style.icons }}\n          onClick={() => setVideo(!video)}\n        />\n      </Action>\n      {/* {video ? <div style={{ position: 'absolute', bottom: 10, right: 10 }}>{children}</div> : null} */}\n    </MainFrameWrapper>\n  )\n}\n\nexport default MainFrame\n","import React from 'react'\nimport MyFrame from './components/MyFrame'\nimport MainFrame from './components/MainFrame'\nimport { Button, Span, Input, Flex } from '../styled'\nimport { IDevice } from '../types'\nconst ENDPOINT = 'http://localhost:4000'\n\nconst cameraVideoSize = {\n    width: { ideal: 1280 },\n    height: { ideal: 720 }\n}\n\nexport function getCamStream({ a, v, callback }: any) {\n    let nav: any = navigator\n    nav.getUserMedia = nav.getUserMedia || nav.webkitGetUserMedia || nav.mozGetUserMedia || nav.msGetUserMedia\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n        navigator.mediaDevices.getUserMedia({ video: v ? { ...cameraVideoSize, ...v } : v, audio: a }).then(function (stream: any) {\n            callback(stream)\n        })\n    }\n    return null\n}\n\nfunction LiveFeed() {\n    const [meetId, setMeetId] = React.useState('')\n    const [data, setData] = React.useState(null)\n\n    const [videoDevices, setVideoDevices] = React.useState<Array<IDevice>>([])\n    const [audioDevices, setAudioDevices] = React.useState<Array<IDevice>>([])\n\n    const [videoOrganiser, setVideoOrganiser] = React.useState(false)\n    const [deviceId, setDeviceId] = React.useState('')\n    const [videoSize, setVideoSize] = React.useState([640, 480])\n    const [video, setVideo] = React.useState(false)\n    const [invertX, setInvertX] = React.useState(false)\n    const [invertY, setInvertY] = React.useState(false)\n    const [audio, setAudio] = React.useState(false)\n    const [img, setImg] = React.useState('')\n    const camRef = React.useRef<any>(null)\n    const mainCamRef = React.useRef<any>(null)\n\n    function manipulatevideoVideo() {\n        if (audio || video) {\n            getCamStream({\n                a: audio,\n                v: deviceId ? { deviceId } : video,\n                callback: (stream: any) => {\n                    const video = (document as any).getElementById('cam')\n                    camRef.current.srcObject = stream\n                    camRef.current.play()\n                    let canvas: any = document.createElement('canvas')\n                    canvas.width = video.getBoundingClientRect().width\n                    canvas.height = video.getBoundingClientRect().height\n                    console.log(canvas)\n                    canvas.getContext('2d').drawImage(video, 0, 0)\n                    const data = canvas.toDataURL('image/png')\n                    setImg(data)\n                }\n            })\n        }\n        if (!video && camRef.current && mainCamRef.current) {\n            mainCamRef.current.srcObject = {}\n            camRef.current.srcObject = {}\n        }\n    }\n\n    async function getDevices() {\n        try {\n            let devices = await navigator.mediaDevices.enumerateDevices()\n            let fetchedVideoDevices: Array<IDevice> = []\n            let fetchedAudioDevices: Array<IDevice> = []\n            devices.forEach((device) => {\n                let d = device\n                if (device.kind == 'videoinput') {\n                    fetchedVideoDevices.push(d)\n                }\n                if (device.kind == 'audioinput') {\n                    fetchedAudioDevices.push(d)\n                }\n            })\n            setVideoDevices(fetchedVideoDevices)\n            setAudioDevices(fetchedAudioDevices)\n\n        } catch (e) {\n            console.error('Error fetching devicces: ', e)\n        }\n    }\n\n    React.useEffect(() => {\n        getDevices()\n        let h: number = window.innerHeight\n        let w: number = window.innerWidth\n        console.log(h, w);\n        \n        if(w < h) {\n            setVideoSize([Math.floor(w), Math.floor(w*3/4)])\n        } else {\n            setVideoSize([Math.floor((h-100)*4/3), Math.floor(h-100)])\n        }\n    }, [])\n\n    React.useEffect(() => {\n        manipulatevideoVideo()\n    }, [audio, video, deviceId])\n    console.log(videoSize);\n\n    return (\n        <Flex column className='container'>\n            <Flex className='settings'>\n                <select onChange={(e: any) => setDeviceId(e.target.value)}>\n                    {\n                        videoDevices.map((device: IDevice) => (\n                            <option value={device.deviceId}>{device?.label?.split('(')[0]}</option>\n                        ))\n                    }\n                </select>\n                <Button onClick={() => setInvertX(!invertX)}>Invert Image X</Button>\n                <Button onClick={() => setInvertY(!invertY)}>Invert Image Y</Button>\n            </Flex>\n            {/* <Flex alignItemsCenter>\n                <Button variant=\"primary\" onClick={() => { }}>\n                    Start a Meeting\n                </Button>\n                <Span>or</Span>\n                <Input placeholder=\"Enter Meeting code\" />\n                <Button variant=\"default\">\n                    Join\n                </Button>\n            </Flex>\n            {meetId ? `MeetingId: ${meetId.substr(0, 3)} ${meetId.substr(3, 4)} ${meetId.substr(7, 3)}` : ''} */}\n            <Span></Span>\n            <Flex wrap justifyContentCenter>\n                <MainFrame\n                    camRef={camRef}\n                    invertX={invertX}\n                    invertY={invertY}\n                    audio={audio}\n                    video={video}\n                    setAudio={setAudio}\n                    setVideo={setVideo}\n                    videoSize={videoSize}\n                >\n                    {/* <MyFrame camRef={camRef} /> */}\n                </MainFrame>\n            </Flex>\n            <img src={img} />\n        </Flex>\n    )\n}\n\nexport default LiveFeed\n","import React from 'react'\nimport logo from './logo.svg';\nimport LiveFeed from './Camera'\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        Infinity Coders Home Camera\n      </header>\n      <LiveFeed />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}